"use strict";function ngDropdown(){function controller($scope,$window,$state){$scope.dropdownOpts=[{name:"Portfolio"},{name:"Resume"},{name:"About"},{name:"Contact"}],$scope.placeholder="Portfolio",$scope.reset=function(cb){$scope.$parent.Portfolio=!1,$scope.$parent.Resume=!1,$scope.$parent.About=!1,$scope.$parent.Contact=!1,cb()},$scope.landingCtrl.toggleDropdown=function(){$scope.isOpen=!$scope.isOpen},$scope.landingCtrl.optSelected=function(optSelected){"Contact"===optSelected&&$state.go("landing.contact"),"Portfolio"===optSelected&&$state.go("landing.portfolio"),$window.scrollTo(0,0),$scope.placeholder=optSelected,$scope.reset(function(){$scope.$parent[optSelected]=!0,$scope.$$phase||$scope.$apply()})}}var directive={controller:controller,bindToController:!0,templateUrl:"/views/dropdown.html",restrict:"EA"};return directive}function ngScroll($rootScope,$window){function link(scope,element,attr){angular.element($window).bind("scroll",function(){$window.pageYOffset>=90?$rootScope.$broadcast("dropdown:setFixed"):$rootScope.$broadcast("dropdown:setAbsolute")})}var directive={link:link};return directive}function ngValidate($rootScope,StateService){function validateEmail(email){var regex=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;return regex.test(email)}function link(scope,element,attr){element.bind("keydown keypress click",function($event){var isSubmitBtn="submit-btn"===$event.target.id||"submit-btn-copy"===$event.target.id,modelName=scope.$parent.user.name,modelEmail=scope.$parent.user.email,modelMessage=scope.$parent.user.message,isValid=validateEmail(modelEmail);StateService.data.ContactForm.name.isValid=modelName&&modelName.length?!0:!1,StateService.data.ContactForm.email.isValid=isValid?!0:!1,StateService.data.ContactForm.message.isValid=modelMessage&&modelMessage.length?!0:!1,isSubmitBtn&&(StateService.data.ContactForm.name.isValid&&StateService.data.ContactForm.email.isValid&&StateService.data.ContactForm.message.isValid?$rootScope.$broadcast("contact:submitForm",!0):$rootScope.$broadcast("contact:submitForm",!1))})}var directive={link:link};return directive}function LandingCtrl($scope,$rootScope,$state,$timeout,$window,StateService,RequestApi){console.log("### Landing Controller");var ctrl=this;$scope.user={};var resetNavbar=function(){$scope.isPortfolio=!1,$scope.isContact=!1},resetState=function(){$scope.Portfolio=!1,$scope.Contact=!1};$rootScope.$on("dropdown:setFixed",function(){console.log("on setFixed"),$scope.fixDropdown=!0,$scope.$$phase||$scope.$apply()}),$rootScope.$on("dropdown:setAbsolute",function(){$scope.fixDropdown=!1,$scope.$$phase||$scope.$apply()}),$rootScope.$on("contact:submitForm",function(event,isValid){ctrl.onSubmitContact(isValid)}),$rootScope.$on("isPortfolio",function(){resetNavbar(),$scope.isPortfolio=!0}),$rootScope.$on("isContact",function(){resetNavbar(),$scope.isContact=!0}),this.onWelcome=function(){$timeout(function(){$scope.fadeWelcome=!0,$timeout(function(){$scope.showPortfolio=!0,$state.go("landing.portfolio")},120)})},this.onShareOpt=function(url){$window.open(url)},this.onCompanySelected=function(url){$window.open(url)},this.isValid=function(key){return StateService.data.ContactForm[key].isValid},this.navigate=function(state,condition){resetState(),$state.go(state),$scope[condition]=!0},ctrl.onSubmitContact=function(isValid){isValid?RequestApi.sendMessage($scope.user).then(function(response){console.log("response",response)},function(err){console.log(err)}):console.log("render invalid input")},LandingCtrl.$inject.RequestApi}angular.module("Portfolio",["ui.router"]),angular.module("Portfolio").config(function($stateProvider,$urlRouterProvider,$locationProvider,$httpProvider){$stateProvider.state("landing",{url:"/",templateUrl:"views/landing.html",controller:"LandingCtrl as landingCtrl"}).state("landing.portfolio",{url:"portfolio",templateUrl:"views/includes/portfolio.html",controller:"LandingCtrl as landingCtrl"}).state("landing.contact",{url:"contact",templateUrl:"views/includes/contact.html",controller:"LandingCtrl as landingCtrl"}),$urlRouterProvider.otherwise("/"),$locationProvider.html5Mode(!0),delete $httpProvider.defaults.headers.common["X-Requested-With"]}),angular.module("Portfolio").run(["$rootScope","$window","$state",function($rootScope,$window,$state){console.log("### Run Block");var pathName=document.getElementById("pathName").innerHTML;$rootScope.redirectTo=pathName,$rootScope.$on("$stateChangeStart",function(event,toState,toParams,fromState,fromParams){})}]),angular.module("Portfolio").directive("ngDropdown",ngDropdown),angular.module("Portfolio").directive("ngPortfolio",function(){var directive={restrict:"A",scope:{onLogout:"="},link:function(scope,element,attrs){},templateUrl:"views/portfolio.html",controller:["$scope","$rootScope","$timeout","$state","$window","RequestApi","localStorageService",function($scope,$rootScope,$timeout,$state,$window,RequestApi,localStorageService){console.log("### ngPortfolio.js"),$scope.onLogout=function(){function isReady(){var isRequesting=$rootScope.isRequesting;isRequesting?$timeout(isReady,200):($rootScope.isLogout=null,onReady())}function onReady(){localStorageService.clearAll(),isAuthorized=null,localStorageService.set("isRedirect",!0),RequestApi.onLogout().then(function(){window.location.href=window.location.protocol+"//"+window.location.host})}$rootScope.isLogout=!0;var isRequesting=$rootScope.isRequesting;isRequesting?isReady():onReady()}}]};return directive}),angular.module("Portfolio").directive("ngScroll",ngScroll),angular.module("Portfolio").directive("ngValidate",ngValidate),angular.module("Portfolio").service("RequestApi",function($http){function sendMessage(params){var request=$http({method:"POST",url:"/",data:params});return request.then(successHandler,errorHandler)}function successHandler(response){return response}function errorHandler(response){return response}return{sendMessage:sendMessage}}),angular.module("Portfolio").service("StateService",function(){var data={ContactForm:{name:{isValid:!1},email:{isValid:!1},message:{isValid:!1},isValid:!1}};return{data:data}}),angular.module("Portfolio").controller("LandingCtrl",LandingCtrl);