"use strict";function ngDropdown(){function controller($scope,$rootScope,$window,$state){$scope.dropdownOpts=[{name:"Portfolio"},{name:"Resume"},{name:"About"},{name:"Contact"}],$rootScope.$on("dropdown:setFixed",function(){$scope.isOpen=!1}),$scope.getPlaceholder=function(){var isPortfolio="landing.portfolio"===$state.current.name,isAbout="landing.about"===$state.current.name;"landing.contact"===$state.current.name;return isPortfolio?"Portfolio":isAbout?"About":"Contact"},$scope.reset=function(cb){$scope.$parent.showPortfolio=!1,$scope.$parent.showAbout=!1,$scope.$parent.showContact=!1,cb()},$scope.landingCtrl.toggleDropdown=function(){$scope.isOpen=!$scope.isOpen},$scope.landingCtrl.optSelected=function(optSelected){$window.scrollTo(0,0);var isResume="Resume"===optSelected;if(isResume){var url="https://dl.dropboxusercontent.com/u/7084808/Resume/Scott-Jason-Resume.pdf";return void window.open(url,"_blank")}var mapOpt={Portfolio:"showPortfolio",Contact:"showContact",About:"showAbout"};$scope.reset(function(){var isPortfolio="Portfolio"===optSelected,isAbout="About"===optSelected;isPortfolio?($scope.$parent[mapOpt[optSelected]]=!0,$state.go("landing.portfolio")):isAbout?($scope.$parent[mapOpt[optSelected]]=!0,$state.go("landing.about")):($scope.$parent[mapOpt[optSelected]]=!0,$state.go("landing.contact")),$scope.$$phase||$scope.$apply()})}}var directive={controller:controller,bindToController:!0,templateUrl:"/views/dropdown.html",restrict:"EA"};return directive}function ngScroll($rootScope,$window){function link(scope,element,attr){angular.element($window).bind("scroll",function(){$window.pageYOffset>=90?$rootScope.$broadcast("dropdown:setFixed"):$rootScope.$broadcast("dropdown:setAbsolute")})}var directive={link:link};return directive}function ngValidate($rootScope,$timeout,StateService){function validateEmail(email){var regex=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;return regex.test(email)}function link(scope,element,attr){element.bind("keydown keypress click",function($event){var isSubmitBtn="submit-btn"===$event.target.id||"submit-btn-copy"===$event.target.id,modelName=scope.$parent.user.name,modelEmail=scope.$parent.user.email,modelMessage=scope.$parent.user.message,isValid=validateEmail(modelEmail);StateService.data.ContactForm.name.isValid=modelName&&modelName.length?!0:!1,StateService.data.ContactForm.email.isValid=isValid?!0:!1,StateService.data.ContactForm.message.isValid=modelMessage&&modelMessage.length?!0:!1,isSubmitBtn&&(StateService.data.ContactForm.name.isValid&&StateService.data.ContactForm.email.isValid&&StateService.data.ContactForm.message.isValid?$rootScope.$broadcast("contact:submitForm",!0):$rootScope.$broadcast("contact:submitForm",!1))})}var directive={link:link};return directive}function LandingCtrl($scope,$rootScope,$state,$timeout,$window,StateService,RequestApi){var ctrl=this;$scope.user={},$scope.init=function(redirectTo){var mapOpt={portfolio:"showPortfolio",contact:"showContact",about:"showAbout"};redirectTo&&($scope[mapOpt[redirectTo]]=!0,redirectTo="landing."+redirectTo,$timeout(function(){$scope.fadeWelcome=!0,$timeout(function(){$state.go(redirectTo)},50)})),$rootScope.redirectTo=null},$scope.init($rootScope.redirectTo);var resetState=function(){$scope.showPortfolio=!1,$scope.showContact=!1,$scope.showAbout=!1,$scope.showLoader=!1,$scope.showSent=!1,$timeout(function(){$scope.user={}})};$rootScope.$on("dropdown:setFixed",function(){"landing.contact"!==$state.current.name&&($scope.fixDropdown=!0,$scope.$$phase||$scope.$apply())}),$rootScope.$on("dropdown:setAbsolute",function(){$scope.fixDropdown=!1,$scope.$$phase||$scope.$apply()}),$rootScope.$on("contact:submitForm",function(event,isValid){ctrl.onSubmitContact(isValid)}),$rootScope.$on("showLanding",function(event){$scope.fadeWelcome=!1,resetState(),$scope.init()}),$rootScope.$on("showPortfolio",function(){$scope.fadeWelcome=!0,resetState(),$scope.showPortfolio=!0}),$rootScope.$on("showContact",function(){$scope.fadeWelcome=!0,resetState(),$scope.showContact=!0}),$rootScope.$on("showAbout",function(){$scope.fadeWelcome=!0,resetState(),$scope.showAbout=!0}),this.onWelcome=function(){resetState(),$timeout(function(){$scope.fadeWelcome=!0,$timeout(function(){$scope.showPortfolio=!0,$state.go("landing.portfolio")},50)})},this.onShareOpt=function(url){$window.open(url)},this.onCompanySelected=function(url){$window.open(url)},this.isValid=function(key){return StateService.data.ContactForm[key].isValid},this.navigate=function(state,condition){"landing"===state?$scope.fadeWelcome=!1:$scope.fadeWelcome=!0;var mapOpt={Portfolio:"showPortfolio",Contact:"showContact",About:"showAbout"};resetState(),$state.go(state),"landing"!==state&&($scope[mapOpt[condition]]=!0)},ctrl.onSubmitContact=function(isValid){$timeout(function(){isValid?($scope.showLoader=!0,RequestApi.sendMessage($scope.user).then(function(response){$scope.showSent=!0,$scope.showLoader=!1},function(err){console.log(err)})):($scope.showBadInput=!0,$timeout(function(){$scope.showBadInput=!1},1500))})},ctrl.downloadResume=function(){var url="https://dl.dropboxusercontent.com/u/7084808/Resume/Scott-Jason-Resume.pdf";window.open(url,"_blank")},ctrl.openLink=function(link){window.open(link,"_blank")},LandingCtrl.$inject.RequestApi}angular.module("Portfolio",["ui.router"]),angular.module("Portfolio").config(function($stateProvider,$urlRouterProvider,$locationProvider,$httpProvider){$stateProvider.state("landing",{url:"/",templateUrl:"views/landing.html",controller:"LandingCtrl as landingCtrl"}).state("landing.portfolio",{url:"portfolio",templateUrl:"views/includes/portfolio.html",controller:"LandingCtrl as landingCtrl"}).state("landing.about",{url:"about",templateUrl:"views/includes/about.html",controller:"LandingCtrl as landingCtrl"}).state("landing.contact",{url:"contact",templateUrl:"views/includes/contact.html",controller:"LandingCtrl as landingCtrl"}),$urlRouterProvider.otherwise("/"),$locationProvider.html5Mode(!0),delete $httpProvider.defaults.headers.common["X-Requested-With"]}),angular.module("Portfolio").run(["$rootScope","$window","$state","$location",function($rootScope,$window,$state,$location){var pathName=document.getElementById("pathName").innerHTML;$rootScope.redirectTo=pathName,$rootScope.$on("$locationChangeSuccess",function(){$rootScope.currentLocation=$location.path()}),$rootScope.$watch(function(){return $location.path()},function(newLocation,oldLocation){if($rootScope.currentLocation===newLocation){var isLanding="/"===newLocation,isPortfolio="/portfolio"===newLocation,isAbout="/about"===newLocation,isContact="/contact"===newLocation;isLanding?$rootScope.$broadcast("showLanding"):isPortfolio?$rootScope.$broadcast("showPortfolio"):isAbout?$rootScope.$broadcast("showAbout"):isContact?$rootScope.$broadcast("showContact"):$rootScope.$broadcast("showLanding")}})}]),angular.module("Portfolio").directive("ngDropdown",ngDropdown),angular.module("Portfolio").directive("ngPortfolio",function(){var directive={restrict:"A",scope:{onLogout:"="},link:function(scope,element,attrs){},templateUrl:"views/portfolio.html",controller:["$scope","$rootScope","$timeout","$state","$window","RequestApi","localStorageService",function($scope,$rootScope,$timeout,$state,$window,RequestApi,localStorageService){console.log("### ngPortfolio.js")}]};return directive}),angular.module("Portfolio").directive("ngScroll",ngScroll),angular.module("Portfolio").directive("ngValidate",ngValidate),angular.module("Portfolio").service("RequestApi",function($http){function sendMessage(params){var request=$http({method:"POST",url:"/",data:params});return request.then(successHandler,errorHandler)}function successHandler(response){return response}function errorHandler(response){return response}return{sendMessage:sendMessage}}),angular.module("Portfolio").service("StateService",function(){var data={ContactForm:{name:{isValid:!1},email:{isValid:!1},message:{isValid:!1},isValid:!1}};return{data:data}}),angular.module("Portfolio").controller("LandingCtrl",LandingCtrl);